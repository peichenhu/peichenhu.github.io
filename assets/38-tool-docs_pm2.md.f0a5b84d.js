import{_ as s,c as n,o as a,Q as p}from"./chunks/framework.03c6a765.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"38-tool-docs/pm2.md","filePath":"38-tool-docs/pm2.md","lastUpdated":1703663478000}'),l={name:"38-tool-docs/pm2.md"},o=p(`<h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><blockquote><p>npm install -g pm2</p></blockquote><h2 id="命令" tabindex="-1">命令 <a class="header-anchor" href="#命令" aria-label="Permalink to &quot;命令&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bin/www</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">或</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app.js</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#启动进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app.js</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wb123</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#重命名进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bin/www</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--watch</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#添加进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">www</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#结束进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#结束所有进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">delete</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">www</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#删除进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">delete</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#删除所有进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#列出所有进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">www</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#查看某个进程/应用具体情况</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">monit</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#查看进程/应用的资源消耗情况</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logs</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#查看pm2的日志</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">www</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#若要查看某个进程/应用的日志</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">www</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#重新启动进程/应用</span></span>
<span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">alls</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#重新启动所有进程/应用</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bin/www</span><span style="color:#24292E;"> </span><span style="color:#032F62;">或</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app.js</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#启动进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app.js</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wb123</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#重命名进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bin/www</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--watch</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#添加进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">www</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#结束进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#结束所有进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">delete</span><span style="color:#24292E;"> </span><span style="color:#032F62;">www</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#删除进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">delete</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#删除所有进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">list</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#列出所有进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">www</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#查看某个进程/应用具体情况</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">monit</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#查看进程/应用的资源消耗情况</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logs</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#查看pm2的日志</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">www</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#若要查看某个进程/应用的日志</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">www</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#重新启动进程/应用</span></span>
<span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">alls</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#重新启动所有进程/应用</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="pm2-配置文件启动" tabindex="-1">pm2 配置文件启动 <a class="header-anchor" href="#pm2-配置文件启动" aria-label="Permalink to &quot;pm2 配置文件启动&quot;">​</a></h2><blockquote><p>pm2 start apps.json</p></blockquote><p><code>apps:json</code> 结构，<code>apps</code> 是一个数组，数组中的每一个对象就对应一个 <code>pm2</code> 中运行的应用</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">###  参数说明：</span></span>
<span class="line"><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#应用程序名称</span></span>
<span class="line"><span style="color:#B392F0;">args</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#脚本的参数域</span></span>
<span class="line"><span style="color:#B392F0;">cwd</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#应用程序所在的目录</span></span>
<span class="line"><span style="color:#B392F0;">script</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#应用程序的脚本路径</span></span>
<span class="line"><span style="color:#B392F0;">log_date_format</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#B392F0;">node_args</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#node 的参数域</span></span>
<span class="line"><span style="color:#B392F0;">error_file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#自定义应用程序的错误日志文件</span></span>
<span class="line"><span style="color:#B392F0;">out_file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#自定义应用程序日志文件</span></span>
<span class="line"><span style="color:#B392F0;">pid_file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#自定义应用程序的pid文件</span></span>
<span class="line"><span style="color:#B392F0;">instances</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#B392F0;">min_uptime</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#最小运行时间，这里设置的是60s即如果应用程序在60s内退出，pm2会认为程序异常退出，此时触发重启max_restarts设置数量</span></span>
<span class="line"><span style="color:#B392F0;">max_restarts</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#设置应用程序异常退出重启的次数，默认15次（从0开始计数）</span></span>
<span class="line"><span style="color:#B392F0;">cron_restart</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#定时启动，解决重启能解决的问题</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#是否启用监控模式，默认是false。如果设置成true，当应用程序变动时，  pm2会自动重载。这里也可以设置你要监控的文件。</span></span>
<span class="line"><span style="color:#B392F0;">merge_logs</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#B392F0;">exec_interpreter</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#应用程序的脚本类型，这里使用的shell，默认是nodejs</span></span>
<span class="line"><span style="color:#B392F0;">exec_mode</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork</span></span>
<span class="line"><span style="color:#B392F0;">autorestart</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#启用/禁用应用程序崩溃或退出时自动重启</span></span>
<span class="line"><span style="color:#B392F0;">vizion</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#启用/禁用vizion特性(版本控制)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">###  参数说明：</span></span>
<span class="line"><span style="color:#6F42C1;">name</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#应用程序名称</span></span>
<span class="line"><span style="color:#6F42C1;">args</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#脚本的参数域</span></span>
<span class="line"><span style="color:#6F42C1;">cwd</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#应用程序所在的目录</span></span>
<span class="line"><span style="color:#6F42C1;">script</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#应用程序的脚本路径</span></span>
<span class="line"><span style="color:#6F42C1;">log_date_format</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6F42C1;">node_args</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#node 的参数域</span></span>
<span class="line"><span style="color:#6F42C1;">error_file</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#自定义应用程序的错误日志文件</span></span>
<span class="line"><span style="color:#6F42C1;">out_file</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#自定义应用程序日志文件</span></span>
<span class="line"><span style="color:#6F42C1;">pid_file</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#自定义应用程序的pid文件</span></span>
<span class="line"><span style="color:#6F42C1;">instances</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6F42C1;">min_uptime</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#最小运行时间，这里设置的是60s即如果应用程序在60s内退出，pm2会认为程序异常退出，此时触发重启max_restarts设置数量</span></span>
<span class="line"><span style="color:#6F42C1;">max_restarts</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#设置应用程序异常退出重启的次数，默认15次（从0开始计数）</span></span>
<span class="line"><span style="color:#6F42C1;">cron_restart</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#定时启动，解决重启能解决的问题</span></span>
<span class="line"><span style="color:#6F42C1;">watch</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#是否启用监控模式，默认是false。如果设置成true，当应用程序变动时，  pm2会自动重载。这里也可以设置你要监控的文件。</span></span>
<span class="line"><span style="color:#6F42C1;">merge_logs</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#</span></span>
<span class="line"><span style="color:#6F42C1;">exec_interpreter</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#应用程序的脚本类型，这里使用的shell，默认是nodejs</span></span>
<span class="line"><span style="color:#6F42C1;">exec_mode</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork</span></span>
<span class="line"><span style="color:#6F42C1;">autorestart</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#启用/禁用应用程序崩溃或退出时自动重启</span></span>
<span class="line"><span style="color:#6F42C1;">vizion</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#启用/禁用vizion特性(版本控制)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// apps.json 示例</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;apps&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;serverName&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 名称</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;script&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;./index.js&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 入口文件</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;env&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;">// 环境</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;NODE_ENV&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;development&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;env_production&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;NODE_ENV&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;production&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;instances&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 启用多少个实例</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;exec_mode&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;cluster&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;max_restarts&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 设置应用程序异常退出重启的次数，默认15次（从0开始计数）</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;restart_delay&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">5000</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 异常重启情况下，延时重启时间</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;log_date_format&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;YYYY-MM-DD HH:mm Z&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;combine_logs&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;log_file&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&lt;yourpath&gt;/combined.outerr.log&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 日志目录</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;out_file&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&lt;yourpath&gt;/out.log&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;error_file&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&lt;yourpath&gt;/err.log&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// apps.json 示例</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;apps&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;serverName&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 名称</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;script&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;./index.js&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 入口文件</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;env&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6A737D;">// 环境</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;NODE_ENV&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;development&quot;</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;env_production&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;NODE_ENV&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;production&quot;</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;instances&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 启用多少个实例</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;exec_mode&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;cluster&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 应用程序启动模式，这里设置的是cluster_mode（集群），默认是fork</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;max_restarts&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 设置应用程序异常退出重启的次数，默认15次（从0开始计数）</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;restart_delay&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 异常重启情况下，延时重启时间</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;log_date_format&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;YYYY-MM-DD HH:mm Z&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;combine_logs&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;log_file&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&lt;yourpath&gt;/combined.outerr.log&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 日志目录</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;out_file&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&lt;yourpath&gt;/out.log&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;error_file&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&lt;yourpath&gt;/err.log&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="资料" tabindex="-1">资料 <a class="header-anchor" href="#资料" aria-label="Permalink to &quot;资料&quot;">​</a></h2><p><a href="https://pm2.fenxianglu.cn/docs/start" target="_blank" rel="noreferrer">PM2 中文网</a><a href="https://juejin.cn/post/6889300755539312653" target="_blank" rel="noreferrer">PM2 命令使用方法总结</a></p>`,11),e=[o];function t(r,c,y,E,i,u){return a(),n("div",null,e)}const b=s(l,[["render",t]]);export{m as __pageData,b as default};
