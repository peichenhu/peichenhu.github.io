import{_ as s,c as n,o as a,Q as l}from"./chunks/framework.03c6a765.js";const u=JSON.parse('{"title":"定时任务","description":"","frontmatter":{},"headers":[],"relativePath":"40-others/定时任务.md","filePath":"40-others/定时任务.md","lastUpdated":1703663478000}'),p={name:"40-others/定时任务.md"},o=l(`<h1 id="定时任务" tabindex="-1">定时任务 <a class="header-anchor" href="#定时任务" aria-label="Permalink to &quot;定时任务&quot;">​</a></h1><p>crontab 命令被用来提交和管理用户的需要周期性执行的任务。</p><p>crontab 命令就是修改 <code>/var/spool/cron</code> 中的定时任务文件。</p><h2 id="crontab-命令" tabindex="-1">crontab 命令 <a class="header-anchor" href="#crontab-命令" aria-label="Permalink to &quot;crontab 命令&quot;">​</a></h2><table><thead><tr><th>参数</th><th>解释</th><th>示例</th></tr></thead><tbody><tr><td>-l</td><td>list 查看定时任务</td><td>crontab -l</td></tr><tr><td>-e</td><td>edit 编辑定时任务，建议手动编辑</td><td>crontab -e</td></tr><tr><td>-i</td><td>删除定时任务，提示用户确认删除，避免出错</td><td>crontab -i</td></tr><tr><td>-r</td><td>删除定时任务，移除/var/spool/cron/username 文件，全没了</td><td>crontab -r</td></tr><tr><td>-u user</td><td>指定用户执行任务，root 可以管理用户计划任务</td><td>crontab -u aiguo -l</td></tr></tbody></table><h2 id="时间表示法" tabindex="-1">时间表示法： <a class="header-anchor" href="#时间表示法" aria-label="Permalink to &quot;时间表示法：&quot;">​</a></h2><table><thead><tr><th>特殊符号</th><th>含义</th></tr></thead><tbody><tr><td>*</td><td>表示“每”的意思，如 00 23 cmd 表示每月每周每日的 23:00 整点执行</td></tr><tr><td>-</td><td>表示时间范围分隔符，如 17-19，代表每天的 17、18、19 点</td></tr><tr><td>，</td><td>逗号，表示分割时段，如 30 17,18,19 * cmd 表示每天的 17、18、19 的半点执行</td></tr><tr><td>/n</td><td>n 表示可以整除的数字，每隔 n 的单位时间，如每隔 10 分钟表示/10* cmd</td></tr></tbody></table><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 前5列是关于执行时间配置，最后1列是具体执行命令。</span></span>
<span class="line"><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">---------------- </span><span style="color:#9ECBFF;">分</span><span style="color:#E1E4E8;"> (0 </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">59</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">------------- </span><span style="color:#9ECBFF;">时</span><span style="color:#E1E4E8;"> (0 </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">23</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">---------- </span><span style="color:#9ECBFF;">日</span><span style="color:#E1E4E8;"> (1 </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">------- </span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;"> (1 </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">---- </span><span style="color:#9ECBFF;">星期</span><span style="color:#E1E4E8;"> (0 </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">) (</span><span style="color:#B392F0;">星期日可为0或7</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> 执行的命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 示例</span></span>
<span class="line"><span style="color:#B392F0;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">每小时执行，每小时的整点执行</span></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">每周执行，</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">每周周四凌晨2点1分执行</span></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">每月执行，每月的3号的凌晨2点1分执行</span></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">每年执行，每年4月3日凌晨2点1分执行</span></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">,5</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">每周周3和周5的凌晨2点1分执行</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> 13,14 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> 6,0     每周六，周日下午1点和2点的每一份中执行</span></span>
<span class="line"><span style="color:#B392F0;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9</span><span style="color:#9ECBFF;">-18</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">-5</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">每周一到周五每天早上9点到下午6点整执行</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">/10 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">        每隔10分钟执行一次任务</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">7 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">          如果没法整除，定时任务则没有意义，可以自定制脚本控制频率</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 定时任务最小单位是分钟，想完成秒级任务，只能通过其他方式（编程语言）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 前5列是关于执行时间配置，最后1列是具体执行命令。</span></span>
<span class="line"><span style="color:#005CC5;">.</span><span style="color:#24292E;">---------------- </span><span style="color:#032F62;">分</span><span style="color:#24292E;"> (0 </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">59</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">.</span><span style="color:#24292E;">------------- </span><span style="color:#032F62;">时</span><span style="color:#24292E;"> (0 </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">23</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">.</span><span style="color:#24292E;">---------- </span><span style="color:#032F62;">日</span><span style="color:#24292E;"> (1 </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">31</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">.</span><span style="color:#24292E;">------- </span><span style="color:#032F62;">月</span><span style="color:#24292E;"> (1 </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">.</span><span style="color:#24292E;">---- </span><span style="color:#032F62;">星期</span><span style="color:#24292E;"> (0 </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">) (</span><span style="color:#6F42C1;">星期日可为0或7</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> 执行的命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 示例</span></span>
<span class="line"><span style="color:#6F42C1;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">           </span><span style="color:#032F62;">每小时执行，每小时的整点执行</span></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">           </span><span style="color:#032F62;">每周执行，</span><span style="color:#24292E;"> </span><span style="color:#032F62;">每周周四凌晨2点1分执行</span></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">           </span><span style="color:#032F62;">每月执行，每月的3号的凌晨2点1分执行</span></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">           </span><span style="color:#032F62;">每年执行，每年4月3日凌晨2点1分执行</span></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">,5</span><span style="color:#24292E;">         </span><span style="color:#032F62;">每周周3和周5的凌晨2点1分执行</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;"> 13,14 </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> 6,0     每周六，周日下午1点和2点的每一份中执行</span></span>
<span class="line"><span style="color:#6F42C1;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9</span><span style="color:#032F62;">-18</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">-5</span><span style="color:#24292E;">      </span><span style="color:#032F62;">每周一到周五每天早上9点到下午6点整执行</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;">/10 </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">        每隔10分钟执行一次任务</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;">7 </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">          如果没法整除，定时任务则没有意义，可以自定制脚本控制频率</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 定时任务最小单位是分钟，想完成秒级任务，只能通过其他方式（编程语言）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="测试" tabindex="-1">测试 <a class="header-anchor" href="#测试" aria-label="Permalink to &quot;测试&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/task/test-crontab.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第1步：创建定时任务, 每 1 分钟执行一次定时任务A</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@xxx]# crontab -e</span></span>
<span class="line"><span style="color:#6A737D;"># 写入【每分钟执行 date 写入到 /home/task/test-crontab.txt】</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> date </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> /home/task/test-crontab.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第2步：检查定时任务</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@xxx]# crontab -l</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /usr/bin/echo </span><span style="color:#9ECBFF;">&quot;aiguo带你学习linux&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> /usr/local/study/helloaiguo.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第3步：可以检测文件内容</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/study/helloaiguo.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第4步：删除一个定时任务， 使用 crontab -e 直接删除（或者 \\# 注释）第一步中添加的内容即可</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">touch</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/task/test-crontab.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第1步：创建定时任务, 每 1 分钟执行一次定时任务A</span></span>
<span class="line"><span style="color:#24292E;">[root@xxx]# crontab -e</span></span>
<span class="line"><span style="color:#6A737D;"># 写入【每分钟执行 date 写入到 /home/task/test-crontab.txt】</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> date </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> /home/task/test-crontab.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第2步：检查定时任务</span></span>
<span class="line"><span style="color:#24292E;">[root@xxx]# crontab -l</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> /usr/bin/echo </span><span style="color:#032F62;">&quot;aiguo带你学习linux&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> /usr/local/study/helloaiguo.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第3步：可以检测文件内容</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/study/helloaiguo.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 第4步：删除一个定时任务， 使用 crontab -e 直接删除（或者 \\# 注释）第一步中添加的内容即可</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>实际案例</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@pch1024 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# crontab -l</span></span>
<span class="line"><span style="color:#6A737D;"># 系统自带的定时任务</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">/5 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /opt/hosteye/bin/upgrade --upgrade_mode=</span><span style="color:#F97583;">8&gt;</span><span style="color:#E1E4E8;">/dev/null </span><span style="color:#F97583;">2&gt;&amp;1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 测试定时任务：每分钟执行一次</span></span>
<span class="line"><span style="color:#6A737D;"># * * * * *    date &gt;&gt; /home/task/test.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 每 30 分钟执行一次 auto-git-pull.sh</span></span>
<span class="line"><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/task/auto-git-pull.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取 crontab 环境变量信息</span></span>
<span class="line"><span style="color:#6A737D;"># * * * * *    /usr/bin/env &gt; /home/task/env.txt</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@pch1024 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# crontab -l</span></span>
<span class="line"><span style="color:#6A737D;"># 系统自带的定时任务</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;">/5 </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> /opt/hosteye/bin/upgrade --upgrade_mode=</span><span style="color:#D73A49;">8&gt;</span><span style="color:#24292E;">/dev/null </span><span style="color:#D73A49;">2&gt;&amp;1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 测试定时任务：每分钟执行一次</span></span>
<span class="line"><span style="color:#6A737D;"># * * * * *    date &gt;&gt; /home/task/test.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 每 30 分钟执行一次 auto-git-pull.sh</span></span>
<span class="line"><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">      </span><span style="color:#032F62;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/task/auto-git-pull.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取 crontab 环境变量信息</span></span>
<span class="line"><span style="color:#6A737D;"># * * * * *    /usr/bin/env &gt; /home/task/env.txt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 进入目录</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@pch1024 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# cd /home/task</span></span>
<span class="line"><span style="color:#6A737D;"># 创建脚本执行权限</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@pch1024 task]# touch auto-git-pull.sh</span></span>
<span class="line"><span style="color:#6A737D;"># 授予脚本执行权限</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@pch1024 task]# chmod +x auto-git-pull.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 进入目录</span></span>
<span class="line"><span style="color:#24292E;">[root@pch1024 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# cd /home/task</span></span>
<span class="line"><span style="color:#6A737D;"># 创建脚本执行权限</span></span>
<span class="line"><span style="color:#24292E;">[root@pch1024 task]# touch auto-git-pull.sh</span></span>
<span class="line"><span style="color:#6A737D;"># 授予脚本执行权限</span></span>
<span class="line"><span style="color:#24292E;">[root@pch1024 task]# chmod +x auto-git-pull.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@pch1024 task]# cat auto-git-pull.sh</span></span>
<span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#6A737D;"># 脚本中涉及文件路径时写全局路径；</span></span>
<span class="line"><span style="color:#6A737D;"># 脚本执行要用到java或其他环境变量时，通过 \`source\` 命令引入环境变量，如：</span></span>
<span class="line"><span style="color:#6A737D;"># 环境变量</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日志</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;$(</span><span style="color:#B392F0;">date</span><span style="color:#9ECBFF;">)  auto-git-pull 任务开始&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/task/log.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进入 blog 仓库目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/blog</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">checkout</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gh-pages</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进入 vscode 仓库目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/vscode</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日志</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;$(</span><span style="color:#B392F0;">date</span><span style="color:#9ECBFF;">)  auto-git-pull 任务完成&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/task/log.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">###################</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@pch1024 task]# cat auto-git-pull.sh</span></span>
<span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#6A737D;"># 脚本中涉及文件路径时写全局路径；</span></span>
<span class="line"><span style="color:#6A737D;"># 脚本执行要用到java或其他环境变量时，通过 \`source\` 命令引入环境变量，如：</span></span>
<span class="line"><span style="color:#6A737D;"># 环境变量</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日志</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;$(</span><span style="color:#6F42C1;">date</span><span style="color:#032F62;">)  auto-git-pull 任务开始&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/task/log.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进入 blog 仓库目录</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/blog</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">checkout</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gh-pages</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进入 vscode 仓库目录</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/vscode</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日志</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;$(</span><span style="color:#6F42C1;">date</span><span style="color:#032F62;">)  auto-git-pull 任务完成&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/task/log.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">###################</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 在三点的每分钟都会执行一次任务,也就是执行了60次</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> 3 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> command</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 每天3点执行一次某任务</span></span>
<span class="line"><span style="color:#B392F0;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 在三点的每分钟都会执行一次任务,也就是执行了60次</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;"> 3 </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> command</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 每天3点执行一次某任务</span></span>
<span class="line"><span style="color:#6F42C1;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://crontab.guru/" target="_blank" rel="noreferrer">crontab</a></li><li><a href="https://zhuanlan.zhihu.com/p/646216698" target="_blank" rel="noreferrer">Linux 学习——定时任务</a></li><li><a href="https://zhuanlan.zhihu.com/p/58719487?utm_source=wechat_session" target="_blank" rel="noreferrer">一文精通 crontab 从入门到出坑</a></li></ul>`,18),e=[o];function t(c,r,y,E,i,F){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{u as __pageData,d as default};
